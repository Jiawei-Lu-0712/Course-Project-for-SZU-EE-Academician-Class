# 系统配置选项 

## 配置说明
小麻雀处理器是可参数化配置的，通过修改`/rtl/config.v`文件的宏定义，可以方便地修改各项参数，实现可裁剪、弹性化设计。  

## 参数配置区
|宏|默认值|功能|
|-|-|-|
|CPU_CLOCK_HZ|27_000_000|设置输入处理器的时钟频率|
|IRam_KB|32|iram指令存储器大小，单位为KB|
|SRam_KB|16|sram数据存储器大小，单位为KB|
|FPIOA_PORT_NUM|16|FPIOA端口数量，可设置为[1,32]|
|MVENDORID_NUM|32'h114514|Vendor ID|
|MARCHID_NUM|32'd1|微架构编号|
|MHARTID_NUM |32'd0|线程编号，单核则为0|
|DIV_MODE|"HF_DIV"|除法器模式，可配置为 高频多周期"HF_DIV"；低频少周期"HP_DIV"；仿真模式"SIM_DIV"|

## iram配置区
|宏|默认值|功能|
|-|-|-|
|IRAM_SPRAM_W4B|关闭|单端口ram只能按32bit写入|  
如果综合器不支持字节写使能，就要打开`IRAM_SPRAM_W4B`，代价是sb sh指令访问iram会导致系统错误，除非手写`sh sb`汇编否则不会有影响。  
安路FPGA需要打开。  

|宏|默认值|功能|
|-|-|-|
|PROG_IN_FPGA|开启|综合阶段读入inst.txt|
|PROG_FPGA_PATH|"../../tb/inst.txt"|文件路径，绝对路径和相对路径都可以|
处理器在FPGA上实现，软件怎么写进去？通过`$readmem`实现。  
软件编译后的`*.bin`文件，通过`工具箱.bat`转换为综合器可读入的`inst.txt`文件，综合器读入后作为程序存储器的初始化值，和RTL一起写进FPGA。  

## 开关配置区
|宏|默认值|功能|
|-|-|-|
|RV32I_BASE_ISA|开启|使用RV32I基础指令集，关闭则使用RV32E|
|RV32_M_ISA|开启|启用M扩展(乘法/除法)|
|JTAG_DBG_MODULE|关闭|启用JTAG调试接口(不好用)|
|SGCY_MUL|开启|启用单周期乘法器，可能会降低最大频率|
|CSR_MINSTRET_EN|开启|启用minstret指令计数器|
|HARD_RST_DIGT_FILTER|开启|启用外部复位数字滤波，提高复位可靠性|
|STABLE_REV_RTL|开启|稳定版本标记|

## 仿真配置区
|宏|默认值|功能|
|-|-|-|
|SIM_UART_FAST|开启|UART分频器强制为0，提高printf速度|
|SIM_SD_MODEL|关闭|启用SD卡仿真模型|
|SIM_TRACE_LOG|打开|/tb/trace.log打印关键信息|